<div class="filter-sidebar">
  <div class="filter-header">
    <h3>Filtreler</h3>
    <button 
      class="clear-all-btn" 
      (click)="clearAllFilters()"
      *ngIf="hasActiveFilters$ | async">
      Tümünü Temizle
    </button>
  </div>

  <div class="filter-content">
    <!-- Kategoriler -->
    <div class="filter-section">
      <h4 class="filter-title">Kategoriler</h4>
      <div class="filter-options">
        <label 
          *ngFor="let category of categories" 
          class="radio-option">
          <input 
            type="radio" 
            name="category"
            [value]="category.id"
            [(ngModel)]="selectedCategoryId"
            (change)="onCategoryChange()">
          <span class="radio-label">{{ category.name }}</span>
        </label>
      </div>
    </div>
    <!-- Beden Filtresi - CODE tabanlı -->
    <div class="filter-section">
      <h4 class="filter-title">Beden</h4>
      <div class="filter-options">
        <label 
          *ngFor="let size of sizes" 
          class="checkbox-option">
          <input 
            type="checkbox"
            [value]="size.id"
            [checked]="isSelected('sizes', size.id)"
            (change)="onSizeChange(size.id, $event)">
          <span class="checkbox-label">
            {{ size.name }}
            <span class="count" *ngIf="size.count">({{ size.count }})</span>
          </span>
        </label>
      </div>
    </div>

    <!-- Markalar - CODE tabanlı -->
    <div class="filter-section">
      <h4 class="filter-title">Markalar</h4>
      <div class="search-box">
        <input 
          type="text" 
          placeholder="Marka ara..."
          [(ngModel)]="brandSearchTerm"
          class="search-input">
      </div>
      <div class="filter-options scrollable">
        <label 
          *ngFor="let brand of getFilteredBrands()" 
          class="checkbox-option">
          <input 
            type="checkbox"
            [value]="brand.id"
            [checked]="isSelected('brandIds', brand.id)"
            (change)="onBrandChange(brand.id, $event)">
          <span class="checkbox-label">
            {{ brand.name }}
            <span class="count" *ngIf="brand.productCount">({{ brand.productCount }})</span>
          </span>
        </label>
      </div>
    </div>

    <!-- Cinsiyet - API CODE tabanlı -->
    <div class="filter-section">
      <h4 class="filter-title">Cinsiyet</h4>
      <div class="filter-options">
        <label 
          *ngFor="let gender of genders" 
          class="checkbox-option">
          <input 
            type="checkbox"
            [value]="gender.apiCode"
            [checked]="isSelected('genders', gender.apiCode)"
            (change)="onGenderChange(gender.apiCode, $event)">
          <span class="checkbox-label">
            {{ gender.name }}
            <span class="count" *ngIf="gender.count">({{ gender.count }})</span>
          </span>
        </label>
      </div>
    </div>

    <!-- Renk - RGB CODE tabanlı -->
    <div class="filter-section">
      <h4 class="filter-title">Renk</h4>
      <div class="color-grid">
        <div 
          *ngFor="let color of colors; let i = index" 
          class="color-option"
          [class.selected]="isSelected('colors', color.rgbCode)"
          (click)="onColorChange(color.rgbCode)"
          [title]="color.name">
          <div 
            class="color-circle"
            [style.background-color]="color.hexCode">
          </div>
          <span class="color-name">{{ color.name }}</span>
        </div>
      </div>
    </div>
    <!-- Fiyat Aralığı -->
    <div class="filter-section">
      <h4 class="filter-title">Fiyat Aralığı</h4>
      <div class="price-range">
        <div class="price-inputs">
          <input 
            type="number" 
            placeholder="Min"
            [(ngModel)]="minPrice"
            (blur)="onPriceChange()"
            class="price-input">
          <span class="price-separator">-</span>
          <input 
            type="number" 
            placeholder="Max"
            [(ngModel)]="maxPrice"
            (blur)="onPriceChange()"
            class="price-input">
        </div>
        <div class="price-suggestions">
          <button 
            *ngFor="let range of priceRanges"
            class="price-suggestion"
            (click)="setPriceRange(range.min, range.max)">
            {{ range.label }}
          </button>
        </div>
      </div>
    </div>

    <!-- Değerlendirmeler -->
    <div class="filter-section">
      <h4 class="filter-title">Değerlendirmeler</h4>
      <div class="filter-options">
        <label 
          *ngFor="let rating of ratingOptions" 
          class="checkbox-option">
          <input 
            type="checkbox"
            [value]="rating.value"
            [checked]="isSelected('ratings', rating.value)"
            (change)="onRatingChange(rating.value, $event)">
          <span class="checkbox-label">
            <div class="stars">
              <span *ngFor="let star of getStars(rating.value)" 
                    class="star"
                    [class.filled]="star <= rating.value">★</span>
            </div>
            ve üzeri
            <span class="count" *ngIf="rating.count">({{ rating.count }})</span>
          </span>
        </label>
      </div>
    </div>

    <!-- Diğer Filtreler -->
    <div class="filter-section">
      <h4 class="filter-title">Diğer Filtreler</h4>
      <div class="filter-options">
        <label class="checkbox-option">
          <input 
            type="checkbox"
            [(ngModel)]="onSaleOnly"
            (change)="onSaleChange()">
          <span class="checkbox-label">İndirimde Olanlar</span>
        </label>
        <label class="checkbox-option">
          <input 
            type="checkbox"
            [(ngModel)]="inStockOnly"
            (change)="onStockChange()">
          <span class="checkbox-label">Stokta Olanlar</span>
        </label>
      </div>
    </div>
  </div>
</div>